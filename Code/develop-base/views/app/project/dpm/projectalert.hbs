<!--<script src="{{projcfg.appurl}}/static/js/containerlistingdata.js" type="text/javascript"></script>-->
<style>
    .div-bor{
        position: relative;width: 100%;height: 35px;
        border-bottom: 1px solid #ccc;
        margin-bottom: 1rem;
    }
    .icon-serach{
        position: absolute;left: 0;z-index:5;
        background-image: url('{{projcfg.appurl}}/static/images/search.png'); /*引入图片图片*/
        background-repeat: no-repeat; /*设置图片不重复*/
        background-position: 1px 0px; /*图片显示的位置*/
        width: 20px; /*设置图片显示的宽*/
        height: 20px; /*图片显示的高*/
        top: 5px;
        left: 3px;
        cursor:pointer;
    }
    .serach{
        padding-left: 22px;
    }
    input[type=radio] {
        opacity: 1;
        position: relative;
        left: 2px;
        z-index: 12;
        width: 13px;
        height: 13px;
        cursor: pointer;
        margin: 1rem;
    }

</style>
<div class="row">
    <div class="col-xs-12 col-md-12">
        <div class="widget">
            <div class="widget-body">
                <div id="toolbar" class="row tbRow" style="">
                    <div class="col-xs-12 col-md-12 text-right" style="padding-right:28px;">
                        <form id="searchFrom" class="form-inline">
                            <div class="form-group">
                                <div class="input-group">
                                    <!--<input type="input" class="form-control" style="width:100px;" id="appId" name="appId" placeholder="请输入appId">-->
                                    <select id="status" name="status">
                                        <option value="">全部</option>
                                        <option value="1">未处理</option>
                                        <option value="0">已处理</option>
                                    </select>
                                    <!--<input type="text" list="itemlist" name="status">-->
                                    <!--<datalist id="itemlist">-->
                                        <!--<option value="">全部</option>-->
                                        <!--<option value="1">未处理</option>-->
                                        <!--<option value="0">已处理</option>-->
                                    <!--</datalist>-->
                                    <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" onclick="doSearch()"><i class="fa fa-search"></i>查询</button>
                                    </span>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div id="cc" class="easyui-layout" data-options="fit:true,border:false" style="width: 800px; height:575px;background-color: #fbfbfb;">
                    <div id="images" data-options="region:'center',border:false" style="overflow-x:hidden;overflow-y:hidden">
                        <div id="datagridPanel" style="width:100%;height: 100%;">
                            <table id="myImageDataTable">
                            </table>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>
</div>


<script  type="text/javascript">

    $(function(){
        console.info("执行加载");
        var appId = getQueryString('appId');
        $('#myImageDataTable').datagrid({
            url:'{{projcfg.appurl}}/api/project/dpm/projectalert',
            method:'get',
            rownumbers:false,
            queryParams:{"appId":appId},
            striped:true,
            fitColumns:true,
            fit:true,
            border:true,
            singleSelect:true,
            selectOnCheck:false,
            toolbar: '#toolbar',
            columns:[[
                {"field": "id", checkbox:true},
                {"field": "appId","title":"appId","width":80,align:"center"},
                {"field": "projectName","title":"项目名称","width":80,align:"center"},
                {"field": "title","title":"标题","width":100,align:"center"},
                {"field": "state","title":"状态","width":150,align:"center"},
                {"field": "message","title":"message","width":50,align:"center"},
                {"field": "status","title":"status","width":50,align:"center"}
            ]],
            onLoadError:function() {
                msgError('加载数据出现时发生错误,请稍候重试...');
            },
            pagination:true,
            loadMsg:'正在加载...'
        });


    });

    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }

    function doSearch() {
        console.log("11111111111111111111111111111111111111111")
        $('#myImageDataTable').datagrid('reload');
    }

</script>





























<!--<script  type="text/javascript">-->





<!--function getVerData(imageCode,rowIndex){-->
<!--var flag = "vers"+rowIndex;-->
<!--var select = "<select id=\""+flag+"\" class=\"easyui-combobox\" name=\""+flag+"\" style=\"width:130px;\">";-->
<!--if(imageCode){-->
<!--$.ajax({-->
<!--url: '{{projcfg.appurl}}/api/project/ability/imagemanage/develop/im/verList',-->
<!--type: 'get',-->
<!--async:false,-->
<!--data: {'imageCode':imageCode},-->
<!--success: function (data) {-->
<!--console.log(data);-->
<!--if(data.success) {-->
<!--var verdata = verAarry(data.data);-->
<!--console.log("==",verdata);-->
<!--for(var i=0;i<verdata.length;i++){-->
<!--select += "<option value='"+verdata[i]+"'>"+verdata[i]+"</option>";-->
<!--}-->
<!--}-->
<!--else {-->
<!--msgError(data.msg+',错误代码:'+data.code);-->
<!--}-->
<!--}-->
<!--});-->
<!--}-->
<!--select +=  '</select>';-->
<!--return select;-->
<!--}-->

<!--function verAarry(data){-->
<!--var arr = [];-->
<!--for(var i=0;i<data.length;i++){-->
<!--arr.push(data[i].imageVersion);-->
<!--}-->
<!--//进行倒序排序-->
<!--arr.sort(function(o1,o2){-->
<!--var a1 = o1.replace('v','').split('.');-->
<!--var a2 = o2.replace('v','').split('.');-->
<!--var length = Math.max(a1.length,a2.length);-->
<!--for(var i = 0; i < length; i++){-->
<!--var n1 = parseInt(a1[i] || 0);-->
<!--var n2 = parseInt(a2[i] || 0);-->
<!--if(n1 - n2 != 0){-->
<!--return n2 - n1;-->
<!--}-->
<!--}-->
<!--});-->
<!--return arr;-->
<!--}-->

<!--function openPage(id,title, value, callback) {-->
<!--$('#'+id).show();-->
<!--$("#picture").filebox({-->
<!--buttonText:'选择图片',-->
<!--buttonAlign:'left',-->
<!--accept:'image/*',-->
<!--multiple:'false'-->
<!--});-->
<!--$('#'+id).mydialog({-->
<!--title:title,-->
<!--width: 650,-->
<!--height: 700,-->
<!--top:100,-->
<!--modal: true,-->
<!--myButtons:[-->
<!--{-->
<!--text:'确定',-->
<!--btnCls:'btn btn-blue',-->
<!--handler:function(){-->
<!--callback(id);-->
<!--}-->
<!--},-->
<!--{-->
<!--text:'关闭',-->
<!--btnCls:'btn btn-danger',-->
<!--handler:function(){-->
<!--closeDialog(id);-->
<!--}-->
<!--}-->
<!--]-->
<!--});-->
<!--}-->
<!--function modifyPage(id,title,value,callback){-->
<!--var rows = $('#myImageDataTable').datagrid('getChecked');-->
<!--if(rows.length!=1){-->
<!--msgError("提示，请选择一条数据再进行修改");-->
<!--return false;-->
<!--}-->
<!--var imageCode=rows[0].imageCode;-->
<!--$('#addimage').form("clear");-->
<!--var modal=$('#addimage');-->
<!--$("#showimg").show().html('<label for="picture" class="col-sm-2 control-label no-padding-right">原图:</label><div class="col-sm-10"><img src="data:'+rows[0].pictureType+";base64 ,"+rows[0].picture+'"  style="height:35px;width:35px"></div>');-->
<!--delete rows[0].picture;-->
<!--delete rows[0].pictureName;-->
<!--delete rows[0].pictureType;-->

<!--console.info(rows[0]);-->
<!--console.log(typeof rows[0]);-->
<!--//        var ue1=UE.getEditor('simpleIntroduction');-->
<!--if(rows[0].simpleIntroduction){-->
<!--$("#simpleIntroduction").attr("value",rows[0].simpleIntroduction);-->
<!--}-->

<!--modal.form('load',rows[0]);-->
<!--$("#picture").filebox({-->
<!--buttonText:'选择图片',-->
<!--buttonAlign:'left',-->
<!--accept:'image/*',-->
<!--multiple:'false'-->
<!--});-->

<!--openPage('addimage',title,'',callback);-->
<!--}-->


<!--function doSearch() {-->
<!--$('#myImageDataTable').datagrid('reload');-->
<!--}-->
<!--function doClear() {-->
<!--doSearch();-->
<!--}-->
<!--//修改和新增共同使用一个接口 区分判断条件 通过imageCode是否存在来判断-->
<!--function doAddAndModify(id) {-->
<!--$('#imageForm').form("submit",{-->
<!--url: '{{projcfg.appurl}}/api/project/ability/imagemanage/develop/im/add',-->
<!--onSubmit:function(){-->
<!--var validate = $(this).form('validate');-->
<!--if(!validate) {-->
<!--return false;-->
<!--}-->
<!--},-->
<!--success:function(data){-->
<!--data = JSON.parse(data)-->
<!--if(data.success){-->
<!--msgSuccess(data.msg);-->
<!--$('#myImageDataTable').datagrid("reload");-->
<!--closeDialog(id);-->
<!--}else{-->
<!--msgError(data.msg+',错误代码:'+data.code);-->
<!--}-->
<!--}-->
<!--});-->

<!--}-->

<!--// 打开页面-->


<!--// 清空新增表单数据-->
<!--function clear() {-->
<!--$('#addimage').form('clear');-->
<!--}-->

<!--// 关闭窗口-->
<!--function closeDialog(id) {-->
<!--$('#'+id).dialog('close');-->
<!--clear();-->
<!--}-->
<!--// 获得选择行-->
<!--function doDelete(){-->
<!--var rows = $('#myImageDataTable').datagrid('getChecked');-->
<!--if (rows.length != 1) {-->
<!--bootbox.alert('提示,请选择一条数据再进行删除', function(result){-->
<!--});-->
<!--return false;-->
<!--}-->
<!--console.info(rows);-->
<!--bootbox.confirm('确定删除此条记录？',function (result){-->
<!--if(result){-->
<!--// 获取远程数据-->
<!--$.ajax({-->
<!--url: '{{projcfg.appurl}}/api/project/ability/imagemanage/develop/im/'+ rows[0].imageCode,-->
<!--type: 'delete',-->

<!--success: function (data) {-->
<!--if(data.success) {-->
<!--msgSuccess(data.msg);-->
<!--$('#myImageDataTable').datagrid('reload');-->
<!--}-->
<!--else {-->
<!--msgError(data.msg+',错误代码:'+data.code);-->
<!--}-->
<!--}-->
<!--});-->
<!--}-->
<!--});-->
<!--}-->



    <!--$(function() {-->
        <!--var projectId = getQueryString('imageCode');-->
        <!--$("#detailTree").tree({-->
            <!--method: 'GET',-->
            <!--url: '{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/tree?imageCode='+imageCode,-->
            <!--&lt;!&ndash;url: '{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/detail/'+projectId,&ndash;&gt;-->
            <!--cache:false,-->
            <!--onLoadSuccess: function (node, data) {-->
                <!--console.log("===tree==data===",data);-->
            <!--},-->
            <!--onSelect: function (node) {-->
                <!--console.log(node);-->
                <!--var id=node.id;-->
                <!--var title=node.text;-->
                <!--if(node.parentId){-->

                    <!--$.ajax({-->
                        <!--url:"{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/selectContent",-->
                        <!--type:"post",-->
                        <!--data:{"id":id},-->
                        <!--async:false,-->
                        <!--success:function(result){-->
                            <!--console.info(result);-->
                            <!--console.log("title      "+title);-->
                            <!--$("#title").html(title);-->
                            <!--$("#id").attr("value",id);-->
                            <!--console.info("++++++++++++++++++++++++++")-->
                            <!--console.info(result)-->
                            <!--console.info("++++++++++++++++++++++++++")-->
                            <!--var content=result.data[0].content;-->
                            <!--var ue=UE.getEditor("conent",{-->
                                <!--initialFrameWidth:'100%',-->
                                <!--initialFrameHeight:600-->

                            <!--});-->
                            <!--ue.ready(function() {//编辑器初始化完成再赋值-->
                                <!--$("#editorSubmitContent").show();-->
                                <!--if(typeof content=="undefined"){-->
                                    <!--ue.setContent("请输入内容");  //赋值给UEditor-->
                                <!--}else{-->
                                    <!--if(content!=null){-->
                                        <!--ue.setContent(content);-->
                                    <!--}else{-->
                                        <!--ue.setContent("请输入内容");  //赋值给UEditor-->
                                    <!--}-->
                                <!--}-->
                            <!--});-->
                        <!--}-->
                    <!--});-->
                <!--}-->


                <!--///----------------------------------------------------------------------------->

            <!--},-->
            <!--onContextMenu: function(e, node){-->
                <!--e.preventDefault();-->
                <!--// select the node-->
                <!--$('#detailTree').tree('select', node.target);-->
                <!--// display context menu-->
                <!--$('#mm').menu('show', {-->
                    <!--left: e.pageX,-->
                    <!--top: e.pageY-->
                <!--});-->
            <!--},-->
            <!--onAfterEdit: function(node){-->
                <!--console.log(node.text);-->
                <!--console.log(node.id);-->
                <!--$.ajax({-->
                    <!--url:"{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/updatechildnode",-->
                    <!--method:"post",-->
                    <!--async:"false",-->
                    <!--data:{"id":node.id,"menuName":node.text},-->
                    <!--success:function(results){-->
                        <!--$("#detailTree").tree("reload");-->
                    <!--},-->
                    <!--error:function(err){-->
                        <!--console.log(err);-->
                    <!--}-->
                <!--});-->
            <!--}-->
        <!--});-->

        <!--&lt;!&ndash;$("#edit_all").form({&ndash;&gt;-->
            <!--&lt;!&ndash;url:"{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/updatecontent",&ndash;&gt;-->
            <!--&lt;!&ndash;onSubmit:function(){&ndash;&gt;-->
                <!--&lt;!&ndash;var validate = $(this).form('validate');&ndash;&gt;-->
                <!--&lt;!&ndash;if(!validate) {&ndash;&gt;-->
                    <!--&lt;!&ndash;return false;&ndash;&gt;-->
                <!--&lt;!&ndash;}&ndash;&gt;-->
            <!--&lt;!&ndash;},&ndash;&gt;-->
            <!--&lt;!&ndash;success:function(data){&ndash;&gt;-->
                <!--&lt;!&ndash;var result=JSON.parse(data);&ndash;&gt;-->

                <!--&lt;!&ndash;if(result.success){&ndash;&gt;-->
                    <!--&lt;!&ndash;msgSuccess(result.msg);&ndash;&gt;-->

                <!--&lt;!&ndash;}else{&ndash;&gt;-->
                    <!--&lt;!&ndash;msgError(result.msg+',错误代码:'+result.code);&ndash;&gt;-->
                <!--&lt;!&ndash;}&ndash;&gt;-->
            <!--&lt;!&ndash;}&ndash;&gt;-->

        <!--&lt;!&ndash;});&ndash;&gt;-->
    <!--});-->


    <!--function getQueryString(name) {-->
        <!--var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");-->
        <!--var r = window.location.search.substr(1).match(reg);-->
        <!--if (r != null) return unescape(r[2]); return null;-->
    <!--}-->



    <!--//节点 添加-->
    <!--function append(){-->
        <!--var selected = $('#detailTree').tree('getSelected');-->
        <!--var data = $('#detailTree').tree('getData',selected.target);-->
        <!--var nodeid;-->
        <!--var menuName;-->
            <!--$.ajax({-->
                <!--url:'{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/addchildnode/'+data.id,-->
                <!--type:"post",-->
                <!--async:"false",-->
                <!--success:function(result){-->
                    <!--console.log("================aaaaa====================");-->
                    <!--console.info(result);-->
                    <!--console.log("==================aaaaaa==================");-->
                    <!--if(result.success){-->
                        <!--nodeid=result.data.insertId;-->
                        <!--console.log(nodeid);-->
                        <!--$('#detailTree').tree('append', {-->
                            <!--parent: selected.target,-->
                            <!--data: [{-->
                                <!--id: nodeid,-->
                                <!--text: '新增节点'-->
                            <!--}]-->
                        <!--});-->

                        <!--var _node = $('#detailTree').tree('find',nodeid);-->
                        <!--$('#detailTree').tree("select",_node.target).tree('beginEdit',_node.target);-->
                    <!--}-->

                <!--},-->
                <!--error:function(err){-->
                    <!--console.log(err)-->
                <!--}-->
            <!--});-->

    <!--}-->

    <!--function remove(){-->
        <!--var selected = $('#detailTree').tree('getSelected');-->
            <!--var data= $('#detailTree').tree('getData',selected.target);-->
            <!--var id=data.id;-->
            <!--console.log("---------------------------------------------");-->
            <!--console.info(id);-->
            <!--$.ajax({-->
                <!--url:"{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/deletenode/"+id,-->
                <!--type:"delete",-->
                <!--async:false,-->
                <!--success:function(result){-->
                    <!--if(result.success){-->
                        <!--$('#detailTree').tree('remove',selected.target);-->
                        <!--$("#detailTree").tree("reload");-->
                    <!--}else{-->
                        <!--msgError(result.msg+',错误代码:'+result.code);-->
                    <!--}-->

                <!--}-->
            <!--})-->


    <!--}-->

    <!--function edit(){-->
        <!--var selected = $('#detailTree').tree('getSelected');-->
        <!--var data = $('#detailTree').tree('getData',selected.target);-->
        <!--var _node = $('#detailTree').tree('find',data.id);-->
        <!--$('#detailTree').tree("select",_node.target).tree('beginEdit',_node.target);-->

    <!--}-->

    <!--function updateContent(){-->
        <!--var id=$("#id").val();-->
        <!--var content=UE.getEditor("conent").getContent();-->
        <!--content=encodeURIComponent(content);-->
        <!--$.ajax({-->
            <!--url: "{{projcfg.appurl}}/api/project/dpm/projectdetail/develop/pd/updatecontent",-->
            <!--type: "post",-->
            <!--data: {"id": id, "content": content},-->
            <!--async: false,-->
            <!--success: function (result) {-->

                <!--if (result.success) {-->
                    <!--msgSuccess(result.msg);-->
                <!--} else {-->
                    <!--msgError(result.msg + ',错误代码:' + result.code);-->
                <!--}-->
            <!--}-->
        <!--});-->
    <!--}-->

    <!--function do_return(){-->
        <!--history.go(-1);-->
    <!--}-->
<!--</script>-->
<!--<script type="text/javascript" charset="utf-8" src="{{projcfg.appurl}}/static/js/ueditor/ueditor.config.js"></script>-->
<!--<script type="text/javascript" cahrset="utf-8" src="{{projcfg.appurl}}/static/js/ueditor/ueditor.all.js"></script>-->