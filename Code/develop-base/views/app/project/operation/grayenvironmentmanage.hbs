
<style>
    .conbo>span{
        background-color: dimgrey !important;
    }
    .conbo>span>input{
        background-color: dimgrey !important;
    }
    .panel-body{
        border-width: 0;
        overflow: hidden;
    }
    .deploy-state{
        height: 3px;
        overflow: hidden;
        position: relative;
        width: 100%;
    }
    .deploy-antime
    {
        background: #78fd9a;
        position:absolute;
        width: 100%;
        height: 3px;
        z-index: 1;
        top: 0;
        animation:myfirst 1s linear forwards;
        /* Firefox: */
        -moz-animation:myfirst 1s linear forwards;
        /* Safari and Chrome: */
        -webkit-animation:myfirst 1s linear forwards;
    }

    @keyframes myfirst
    {
        0%   {left:-100%}
        100% {left:0}
    }

    @-moz-keyframes myfirst /* Firefox */
    {
        0%   {left:-100%}
        100% {left:0}
    }

    @-webkit-keyframes myfirst /* Safari and Chrome */
    {
        0%   {left:-100%}
        100% {left:0}
    }
    .d-cancel
    {
        background: #cb3e4b;
        position:absolute;
        width: 100%;
        height: 3px;
        z-index: 1;
        top: 0;
        animation:cancel 2s linear forwards;
        /* Firefox: */
        -moz-animation:cancel 2s linear forwards;
        /* Safari and Chrome: */
        -webkit-animation:cancel 2s linear forwards;
    }

    @keyframes cancel
    {
        0%   {left:0}
        100% {left:-100%}
    }

    @-moz-keyframes cancel /* Firefox */
    {
        0%   {left:0}
        100% {left:-100%}
    }

    @-webkit-keyframes cancel /* Safari and Chrome */
    {
        0%   {left:0}
        100% {left:-100%}
    }
    .d-step-1{

    }
    .d-step-2{
        display: none;
    }
    .d-step-3{
        display: none;
    }
    .bg-danger{
        /*background-color: #2dc3e8;*/
        background-color: #2c97de !important;
    }
</style>

<script>
    let num=1;
    let all=0;
    let version;
    $(document).ready(function () {

        $('.next-deploy').click(function () {
            $.ajax({
                url: '{{projcfg.appurl}}/api/project/operation/grayenvironmentmanage/update',
                type: 'get',
                data: {
                    "instance": 3,//启动实例数
                    "imageName": "192.168.9.69:5000/gdgl:v2.0.5",//启动镜像名称
                    "projectCode": "/gdgl"//项目编码
                },
            })
            if(num==2){
                $("#progress").html("67%");
                $("#progress").css("width","67%");
                $("#td2").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
                $('.deploy-state div:eq(1)').removeClass('d-cancel').addClass('deploy-antime');
                $("#tt2").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");
            }
            if(num==1){
                $("#progress").html("33%");
                $("#progress").css("width","33%");
                $("#td1").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
                $('.deploy-state div:eq(0)').removeClass('d-cancel').addClass('deploy-antime');
                $("#tt1").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");
            }if(num==3){
                $("#td3").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
                $("#progress").html("100%");
                $("#progress").css("width","100%");
                $('.deploy-state div:eq(2)').removeClass('d-cancel').addClass('deploy-antime');
                $("#tt3").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");
                setTimeout(function(){
                    $.messager.confirm("项目部署完成！","点击确认完成部署",function (data) {
                        if(data) {
                            $('.d-step-2').hide();
                            $('.d-step-3').show();
                        }else{
                            return
                        }
                    })
                },2000);

            }
            if(num==4){
                all=1;
                $('.d-step-2').hide();
                $('.d-step-3').show();
                num=0;
            }
            num+=1;


        });


        $('.deploy-cancel').click(function () {
            $.ajax({
                url: '{{projcfg.appurl}}/api/project/operation/grayenvironmentmanage/update',
                type: 'get',
                data: {
                    "instance": 3,//启动实例数
                    "imageName": "192.168.9.69:5000/gdgl:v2.0.4",//启动镜像名称
                    "projectCode": "/gdgl"//项目编码
                },
            })
            num=1;
            all=0;
            $("#progress").html("0%");
            $("#progress").css("width","0%");
            $("#td3").html(version);
            $("#td1").html(version);
            $("#td2").html(version);
            $('.deploy-state div').removeClass('deploy-antime').addClass('d-cancel');
        });
        $('#next-step').click(function () {
            time=0;
            sss();
            show();
            $('.d-step-1').hide();
            $('.d-step-2').show();
        });
        $('.all-deploy').click(function () {
            setTimeout(function(){
                $.messager.confirm("项目部署完成！","点击确认完成部署",function (data) {
                    if(data) {
                        $('.d-step-2').hide();
                        $('.d-step-3').show();
                    }else{
                        return
                    }
                })
            },2000);
            $("#td1").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
            $("#td2").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
            $("#td3").html("<span style='color: red;font-size: 16px'>"+$("#cc").val()+"</span>");
            $.ajax({
                url: '{{projcfg.appurl}}/api/project/operation/grayenvironmentmanage/update',
                type: 'get',
                data: {
                    "instance": 3,//启动实例数
                    "imageName": "192.168.9.69:5000/gdgl:v2.0.5",//启动镜像名称
                    "projectCode": "/gdgl"//项目编码
                },
            })
            $("#tt1").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");
            $("#tt2").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");
            $("#tt3").html("["+new Date().toLocaleString()+"]   [INFO]:版本更新成功");

            $("#progress").html("100%");
            $("#progress").css("width","100%");
            $('.deploy-state div').removeClass('d-cancel').addClass('deploy-antime');
            num=4;
            /*if(all==1||num==4){
                $('.d-step-2').hide();
            $('.d-step-3').show();
            }*/
            all+=1;

        });
    })
</script>

<div class="container-fluid">

    <!-- START EDIT CONTENT -->
    <div class="row">
        <div class="col-lg-12 m-t-2">

            <!-- START ROW -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="row">
                                <div class="col-xs-6">
                                    <h3 class="panel-title"><a href="javascript:void(0);" onclick="goBack()">返回</a>&nbsp;&nbsp;&nbsp;灰度蓝绿部署</h3>
                                </div>
                                <div class="col-xs-2 pull-right">
                                    <div class="input-group input-group-sm">
                                        <input type="text" class="form-control" placeholder="Search...">
                                        <span class="input-group-btn">
                                                    <button class="btn btn-sm btn-primary" type="button"><i class="fa fa-search"></i></button>
                                                </span>
                                    </div>
                                    <!-- /input-group -->
                                </div>
                                <div class="btn-group pull-right">
                                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        全部 <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li><a href="javascript: void(0)"><i class="fa fa-fw text-gray-lighter fa-play-circle m-r-1" style="color:#0ac883;"></i>运行中</a></li>
                                        <li role="separator" class="divider"></li>
                                        <li><a href="javascript: void(0)"><i class="fa fa-fw text-gray-lighter fa-circle m-r-1" style="color: #cb3e4b;"></i>故障</a></li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                        <div class="row m-b-0">
                            <div class="col-lg-6 col-md-12 col-xs-5 col-sm-4 m-b-0">
                                <div class="hr-text hr-text-left m-t-0 m-b-0">
                                    <h6>&nbsp;&nbsp;<strong class="text-white">项目名称</strong></h6>
                                </div>
                                <h1 class="f-w-300 m-t-0 hidden-md hidden-sm hidden-xs app_name">&nbsp;&nbsp;</h1>
                            </div>

                            <div class="col-lg-6 col-md-12 col-xs-7 col-sm-8 m-b-1">
                                <div class="hr-text hr-text-left m-t-0 m-b-0">
                                    <h6><strong class="text-white">镜像</strong></h6>
                                </div>
                                <h1 class="f-w-300 m-t-0 m-b-0 hidden-md hidden-sm hidden-xs" id="image_name">

                                </h1>
                            </div>

                        </div>
                        <div class="row m-t-3 m-l-2 m-r-2">
                            <div class="panel panel-default bg-gray-dark b-a-0">
                                <div class="panel-heading"><h4 class="f-w-300 m-t-0 m-b-0">正式版本更新</h4></div>
                                <div class="panel-body d-step-1">
                                    <div class="row " style="margin:0 auto;width:900px;height: 84px; position: relative;">
                                        <i style="background: #5c5c5c;position: absolute; z-index: 0;width: 100%;height: 1px;top:42px;left: 0;"></i>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white">
                                                <i class="fa fa-television fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0">版本设置</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-gray-lighter text-white" style="margin-left: 100px;">
                                                <i class="fa fa-code fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">蓝绿部署</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-gray-lighter text-white" style="float: right;">
                                                <i class="fa fa-file-text-o fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">版本更新</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row m-t-3 m-l-2 m-r-2">
                                        <div class="col-lg-5 col-md-4 col-sm-4">
                                            <div class="panel panel-default b-a-0 bg-gray b-t-primary b-t-2">
                                                <h2 class="m-t-0 f-w-300"><div class="panel-heading">现行版本</div></h2>
                                                <div class="panel-body">
                                                    <table class="table dataTable no-footer table-striped table-bordered text-white">
                                                        <tbody>
                                                        <tr>
                                                            <td>所属项目</td>
                                                            <td class="app_name"></td>
                                                        </tr>
                                                        <tr>
                                                            <td>镜像名称</td>
                                                            <td class="image_names">http://192.168.9.47:5000/develop-base:v1.4.2</td>
                                                        </tr>
                                                        <tr>
                                                            <td>运行版本</td>
                                                            <td id="version">v1.4.2</td>
                                                        </tr>
                                                        <tr>
                                                            <td>运行时间</td>
                                                            <td id="time"></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-2 col-md-4 col-sm-4">
                                            <div class="panel panel-default b-a-0 bg-gray-dark">
                                                <div class="panel-body p-t-3">
                                                    <h1 style="text-align: center;" class="m-t-3"><i class="fa fa-arrow-right text-success"></i></h1>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-5 col-md-4 col-sm-4">
                                            <div class="panel panel-default b-a-0 bg-gray b-t-success b-t-2">
                                                <h2 class="m-t-0 f-w-300"><div class="panel-heading">部署版本</div></h2>
                                                <div class="panel-body">
                                                    <table class="table dataTable no-footer table-striped table-bordered text-white">
                                                        <tbody>
                                                        <tr>
                                                            <td>所属项目</td>
                                                            <td class="app_name"></td>
                                                        </tr>
                                                        <tr>
                                                            <td>镜像名称</td>
                                                            <td class="image_names">http://192.168.9.47:5000/develop-base:v1.4.2</td>
                                                        </tr>
                                                        <tr>
                                                            <td>运行版本</td>
                                                            <td class="conbo">
                                                                <select id="cc" class="easyui-combobox" style="width:200px;">
                                                                    <option selected="selected">v2.0.2</option>
                                                                    <option value="v2.0.3">v2.0.3</option>
                                                                    <option value="v2.0.4">v2.0.4</option>
                                                                    <option value="v2.0.5">v2.0.5</option>
                                                                    <option value="v2.0.6">v2.0.6</option>
                                                                </select>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>&nbsp;</td>
                                                            <td></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row m-t-3">
                                        <div class="col-lg-5"></div>
                                        <div class="col-lg-2">
                                            <button type="button" class="btn btn-primary btn-lg btn-block" id="next-step"><h4 class="m-t-0 m-b-0">下一步 <i class="fa fa-arrow-circle-o-right"></i></h4></button>
                                        </div>
                                        <div class="col-lg-5"></div>
                                    </div>
                                </div>
                                <div class="panel-body d-step-2">
                                    <div class="row " style="margin:0 auto;width:900px;height: 84px; position: relative;">
                                        <i style="background: #5c5c5c;position: absolute; z-index: 0;width: 100%;height: 1px;top:42px;left: 0;"></i>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white">
                                                <i class="fa fa-television fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0">版本设置</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white" style="margin-left: 100px;">
                                                <i class="fa fa-code fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">蓝绿部署</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-gray-lighter text-white" style="float: right;">
                                                <i class="fa fa-file-text-o fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">版本更新</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row m-t-3 m-l-2 m-r-2">
                                        <div class="row">
                                            <h3 class="f-w-300 text-white m-t-2">部署进度</h3>
                                            <div class="progress">
                                                <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%" id="progress">
                                                    0%
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row bg-gray p-t-1 p-b-1">
                                            <div class="col-lg-4">
                                                <h3 class="f-w-300 m-t-0 m-b-0" id="clock"></h3>
                                            </div>
                                            <div class="col-lg-4" style="text-align: center;padding-top:8px;">
                                                <span class="text-white"><i class="fa fa-fw fa-circle text-primary"></i> 未部署</span>
                                                <span class="text-white"><i class="fa fa-fw fa-circle text-success"></i> 已部署</span>
                                            </div>
                                            <div class="col-lg-4 text-right">
                                                <button type="button" class="btn btn-cerulean next-deploy"><i class="fa fa-arrow-circle-o-down"></i> 下一节点部署</button>
                                                <button type="button" class="btn btn-endaveour all-deploy"><i class="fa fa-list"></i> 全局部署</button>
                                                <button type="button" class="btn btn-minsk deploy-cancel"><i class="fa fa-arrow-circle-o-left"></i> 回滚</button>
                                            </div>

                                        </div>
                                        <div class="row m-t-1">
                                            <div class="timeline">
                                                <div class="timeline-item p-r-1 m-b-0">
                                                    <!-- Timeline - Mini Icon -->
                                                    <div class="timeline-item-head clearfix m-b-0 p-b-0" style="border-bottom: none">
                                                        <div class="row m-l-2 ">
                                                            <table class="table dataTable no-footer table-striped table-bordered text-white">
                                                                <tbody>
                                                                <tr>
                                                                    <td class="col-md-2">容器名称</td>
                                                                    <td class="col-md-2">所属项目</td>
                                                                    <td class="col-md-2">运行环境</td>
                                                                    <td class="col-md-1">状态</td>
                                                                    <td class="col-md-1">流量情况</td>
                                                                    <td class="col-md-2">镜像版本</td>
                                                                    <td class="col-md-1">健康检查</td>
                                                                    <td class="col-md-1">操作</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- Timeline - Badge Date -->
                                                <div class="timeline-date">
                                                    <span class="badge" id="micro_name"></span>
                                                </div>

                                                <div class="timeline-item p-r-1">
                                                    <!-- Timeline - Mini Icon -->
                                                    <div class="timeline-icon">
                                                        <i class="fa fa-circle-o text-info"></i>
                                                    </div>
                                                    <div class="timeline-item-head clearfix m-b-0">
                                                        <div class="row m-l-2">
                                                            <table class="table m-b-0  table-striped table-bordered text-white">
                                                                <tbody>
                                                                <tr>
                                                                    <td class="col-md-2 v-a-m" id="t1"></td>
                                                                    <td class="col-md-2 v-a-m containerId"></td>
                                                                    <td class="col-md-2 v-a-m hostIp"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-play-circle text-success"></i> 运行中</td>
                                                                    <td class="col-md-1 v-a-m">26/s</td>
                                                                    <td class="col-md-2 v-a-m image_name" id="td1"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-check-square text-success"></i> 正常</td>
                                                                    <td class="col-md-1 v-a-m">
                                                                        <div class="btn-group">
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-random"></i> 导流</button>
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-file-text-o"></i> 日志</button>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="deploy-state bg-danger">
                                                                <div></div>
                                                            </div>
                                                        </div>
                                                        <!-- END Avatar, Message & Time -->

                                                    </div>
                                                </div>
                                                <div class="timeline-item p-r-1">
                                                    <!-- Timeline - Mini Icon -->
                                                    <div class="timeline-icon">
                                                        <i class="fa fa-circle-o text-info"></i>
                                                    </div>
                                                    <div class="timeline-item-head clearfix m-b-0">
                                                        <div class="row m-l-2">
                                                            <table class="table m-b-0 table-striped table-bordered text-white">
                                                                <tbody>
                                                                <tr>
                                                                    <td class="col-md-2 v-a-m" id="t2"></td>
                                                                    <td class="col-md-2 v-a-m containerId"></td>
                                                                    <td class="col-md-2 v-a-m hostIp"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-play-circle text-success"></i> 运行中</td>
                                                                    <td class="col-md-1 v-a-m">26/s</td>
                                                                    <td class="col-md-2 v-a-m image_name" id="td2"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-check-square text-success"></i> 正常</td>
                                                                    <td class="col-md-1 v-a-m">
                                                                        <div class="btn-group">
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-random"></i> 导流</button>
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-file-text-o"></i> 日志</button>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="deploy-state bg-danger"><div></div></div>
                                                        </div>
                                                        <!-- END Avatar, Message & Time -->
                                                    </div>
                                                </div>
                                                <div class="timeline-item p-r-1">
                                                    <!-- Timeline - Mini Icon -->
                                                    <div class="timeline-icon">
                                                        <i class="fa fa-circle-o text-info"></i>
                                                    </div>
                                                    <div class="timeline-item-head clearfix m-b-0">
                                                        <div class="row m-l-2">
                                                            <table class="table m-b-0 table-striped table-bordered text-white">
                                                                <tbody>
                                                                <tr>
                                                                    <td class="col-md-2 v-a-m" id="t3"></td>
                                                                    <td class="col-md-2 v-a-m containerId"></td>
                                                                    <td class="col-md-2 v-a-m hostIp"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-play-circle text-success"></i> 运行中</td>
                                                                    <td class="col-md-1 v-a-m">26/s</td>
                                                                    <td class="col-md-2 v-a-m image_name" id="td3"></td>
                                                                    <td class="col-md-1 v-a-m"><i class="fa fa-check-square text-success"></i> 正常</td>
                                                                    <td class="col-md-1 v-a-m">
                                                                        <div class="btn-group">
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-random"></i> 导流</button>
                                                                            <button class="btn btn-default btn-sm"><i class="fa fa-file-text-o"></i> 日志</button>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                            <div class="deploy-state bg-danger"><div></div></div>
                                                        </div>
                                                        <!-- END Avatar, Message & Time -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row m-t-3 m-l-1 m-r-1 m-b-0">
                                                <table class="table table-hover table-condensed bg-gray">
                                                    <tbody>
                                                    <tr>
                                                        <td id="tt1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td id="tt2"></td>
                                                    </tr>
                                                    <tr>
                                                        <td id="tt3"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel-body d-step-3">
                                    <div class="row " style="margin:0 auto;width:900px;height: 84px; position: relative;">
                                        <i style="background: #5c5c5c;position: absolute; z-index: 0;width: 100%;height: 1px;top:42px;left: 0;"></i>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white">
                                                <i class="fa fa-television fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0">版本设置</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white" style="margin-left: 100px;">
                                                <i class="fa fa-code fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">蓝绿部署</h5>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 p-a-0">
                                            <div class="avatar avatar-lg avatar-text visible-lg-inline-block bg-primary text-white" style="float: right;">
                                                <i class="fa fa-file-text-o fa-2x m-t-2"></i><h5 class="f-w-300 m-t-0 text-white">版本更新</h5>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4 col-md-offset-4">
                                            <div class="panel panel-default b-a-2 no-bg b-gray-dark">
                                                <div class="panel-heading text-center">
                                                    <h1 class="text-success fa-5x"><i class="fa fa-check-circle"></i></h1>
                                                    <h2 class="text-center f-w-300 m-b-0">灰度环境版本更新成功</h2>
                                                </div>
                                                <div class="panel-body bg-gray p-b-0">
                                                    <table class="table table-striped table-bordered">
                                                        <tbody>
                                                        <tr>
                                                            <td>项目名称</td>
                                                            <td class="app_name">贵州移动DEVOPS</td>
                                                        </tr>
                                                        <tr>
                                                            <td>运行版本</td>
                                                            <td>v2.0.3</td>
                                                        </tr>
                                                        <tr>
                                                            <td>镜像名称</td>
                                                            <td class="image_names">http://192.168.9.47:5000/develop-base:v1.4.5</td>
                                                        </tr>
                                                        <tr>
                                                            <td>已运行时间</td>
                                                            <td>0小时0分</td>
                                                        </tr>
                                                        </tbody>

                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END ROW -->

        </div>
    </div>
    <!-- END EDIT CONTENT -->

</div>

<script>
    $(function(){
        var appid = getQueryString('appId');
        if(!appid){
            appid = 1;
        }
        var images_name=getQueryString('images_name');
        getGray(appid,images_name);
    });
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }

    function getGray(appid,images_name) {
        $.ajax({
            url:'{{projcfg.appurl}}/api/project/operation/grayenvironmentmanage/getGray',
            type: 'get',
            data: {
                "appId": appid,
                "images_name":images_name
            },
            success:function(data){
                console.log(data);
                version=data.data[0].images_version;
                $(".app_name").html(data.data[0].app_name);
                $(".image_name").html(data.data[0].images_version);
                $(".image_names").html(data.data[0].images_name);
                $("#image_name").html(data.data[0].ename);
                $(".app_no").html(data.data[0].ename);
                $("#version").html(data.data[0].images_version);
                $("#micro_name").html("微服务名称："+data.data[0].images_alias);
                $("#time").html(new Date(data.data[0].update_time).toLocaleString());
                $("#t1").html(data.data[0].container_name);
                $("#t2").html(data.data[1].container_name);
                $("#t3").html(data.data[2].container_name);
                $(".containerId").html(data.data[0].images_alias);
                $(".hostIp").html("虚拟机:"+data.data[0].host_ip);
            }
        })
    }
    function show(){
        $("#clock").html(sss());
    }

    setInterval(function(){
        sss();
    },1000);
    setInterval(function(){
        show();
    },1000);
    let time=0;
    function sss(){
        time=time+1;
        return "部署时间："+time+"s";
    }
    function goBack() {
        window.history.go(-1);
    }
</script>